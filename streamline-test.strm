interface Foo {
    event Transfer(address indexed from, address to, uint256 tokenId);
    event Bid(uint256 marketId);

    function foo(uint256 bar) public returns (uint256);
}

interface Erc721 {
    event Transfer(address from, address to, uint256 tokenId);
    event Approval(address from, address to, uint256 tokenId);
}

struct Zap {
    address user;
    uint256 balance;
}

struct Bar {
    address user;
    uint256 balance;
}

struct Pools {
    address pool;
}

map super_simple:
(Block, Clock) -> Erc721.Transfer {
 (block) => 42;
 (num) => "Streamline";
 (foo) => 42+42+69;
}

map transfers:
(Block, Clock) -> Erc721.Transfer {
 (block) => block.logs;
 map (log) => match_decode(Foo.Transfer, log);
}

map something_else:
(map_transfers) -> Pools {
 (block) => foo(block);
 filter (block) => Pools {
                     pools: [Pool{
                                address: "asdfasdf"
                              }]
                   };
}

map another_one:
(Block) -> Pools {
 (block) => logs(block);
 filter (block) => logs(block);
 map (block) => logs(block);
 map (transfer,foo) => logs(block);
}
